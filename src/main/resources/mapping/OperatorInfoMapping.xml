<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.strelizia.arknights.dao.OperatorInfoMapper">
    <resultMap id="BaseResultMap" type="com.strelizia.arknights.model.OperatorBasicInfo" >
        <result column="operator_id" property="operatorId" jdbcType="INTEGER" />
        <result column="char_id" property="charId" jdbcType="VARCHAR" />
        <result column="draw_name" property="drawName" jdbcType="VARCHAR" />
        <result column="info_name" property="infoName" jdbcType="VARCHAR" />
        <result column="code_name" property="codeName" jdbcType="VARCHAR" />
        <result column="sex" property="sex" jdbcType="VARCHAR" />
        <result column="come_from" property="comeFrom" jdbcType="VARCHAR" />
        <result column="birthday" property="birthday" jdbcType="VARCHAR" />
        <result column="race" property="race" jdbcType="VARCHAR" />
        <result column="height" property="height" jdbcType="INTEGER" />
        <result column="infection" property="infection" jdbcType="VARCHAR" />
        <result column="comprehensive_test" property="comprehensiveTest" jdbcType="VARCHAR" />
        <result column="objective_resume" property="objectiveResume" jdbcType="VARCHAR" />
        <result column="clinical_diagnosis" property="clinicalDiagnosis" jdbcType="VARCHAR" />
        <result column="archives1" property="archives1" jdbcType="VARCHAR" />
        <result column="archives2" property="archives2" jdbcType="VARCHAR" />
        <result column="archives3" property="archives3" jdbcType="VARCHAR" />
        <result column="archives4" property="archives4" jdbcType="VARCHAR" />
        <result column="promotion_info" property="promotionInfo" jdbcType="VARCHAR" />
    </resultMap>

    <select id="getOperatorNameByInfo" parameterType="java.lang.String" resultType="java.lang.String">
        SELECT
            operator_name
        FROM
            t_operator
        WHERE
            draw_name = #{info}
        OR info_name = #{info}
        OR sex = #{info}
        OR come_from = #{info}
        OR birthday = #{info}
        OR race = #{info}
    </select>

    <select id="getOperatorByBirthday" parameterType="java.lang.String" resultType="java.lang.String">
        SELECT
            operator_name
        FROM
            t_operator
        WHERE
            birthday = #{birthday}
    </select>

    <select id="getAllOperator" resultType="java.lang.String">
        SELECT
            operator_name
        FROM
            t_operator
    </select>

    <select id="getOperatorNameById" resultType="java.lang.String">
        SELECT
            operator_name
        FROM
            t_operator
        WHERE
            operator_id = #{id}
    </select>


    <select id="getOperatorInfoByName" parameterType="java.lang.String" resultMap="BaseResultMap">
        SELECT
            operator_id,
            char_id,
            draw_name,
            info_name,
            code_name,
            sex,
            come_from,
            birthday,
            race,
            height,
            infection,
            comprehensive_test,
            objective_resume,
            clinical_diagnosis,
            archives1,
            archives2,
            archives3,
            archives4,
            promotion_info
        FROM
            t_operator
        WHERE
            operator_name = #{name}
    </select>

    <select id="getOperatorIdByChar" parameterType="java.lang.String" resultType="java.lang.Integer">
        select operator_id from t_operator where char_id=#{charId} limit 1
    </select>
    
    <select id="getAllDrawName" resultType="java.lang.String">
        SELECT draw_name from t_operator GROUP BY draw_name
    </select>

    <select id="getAllInfoName" resultType="java.lang.String">
        SELECT info_name from t_operator GROUP BY info_name
    </select>

    <select id="getAllDrawNameLikeStr" parameterType="java.lang.String" resultType="java.lang.String">
        SELECT draw_name from (SELECT draw_name from t_operator GROUP BY draw_name)a1 WHERE draw_name LIKE CONCAT('%',#{str},'%')
    </select>

    <select id="getAllInfoNameLikeStr" parameterType="java.lang.String" resultType="java.lang.String">
        SELECT info_name from (SELECT info_name from t_operator GROUP BY info_name)a1 WHERE info_name LIKE CONCAT('%',#{str},'%')
    </select>
</mapper>